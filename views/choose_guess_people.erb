<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>CF 2.0</title>

    <!-- Bootstrap core CSS -->
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.0.3/css/bootstrap.min.css">

    <!-- Optional theme -->
    <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.0.3/css/bootstrap-theme.min.css">
    <link rel="stylesheet" type="text/css" href="css/homepage.css">

    <style type="text/css">
    #timesleftbig{
      padding-left: 5pt;
      color: #737373;
      font-size: 12pt;
    }
    #shufflebtn, #timesleft{
      display: inline-block;
    }
    #timesleft{
      font-size: 15pt;
    }
    #coinicon{
      display: inline-block;
    }

    #red_background{
      background: #cdf8de;
      border-radius: 5px;
      margin-top: 7px;
      margin-left: 7px;
      padding-top: 5px;
      padding-bottom: 5px;
      padding-left: 0px;
      padding-right: 0px;
      font-size: 12pt;
      min-width: 306px;
      max-width: 653px;
      min-height: 400px;
    }
    </style>

    <script type="text/JavaScript">
    //<![CDATA[

      function guessButton(btnid, uuid, coins){
        var obj = this;
        obj.uuid = uuid;
        obj.btnelement = document.getElementById(btnid);
        obj.coins = parseInt(coins);
        obj.btnelement.onclick = function(){obj.btnClicked();}    
      }

      guessButton.prototype.btnClicked = function(){
        var obj = this;
        if(obj.coins < 50){
          alert("Not enough coins to play GUESS...");
          return;
        }
        var myform = document.forms["playform"];
        myform.uuid.value = obj.uuid;
        myform.submit();
      }

        //]]>
    </script>

  </head>
<!-- NAVBAR
================================================== -->
  <body>
    


    <!-- Marketing messaging and featurettes
    ================================================== -->
    <!-- Wrap the rest of the page in another container to center all the content. -->

    <div class="container marketing">

  <!-- <h1>Records</h1> -->
   <form id="playform" class="form-horizontal" role="form" action="play" method="post">
       <input type="hidden" name="uuid" value=""> 
    </form>


   <div class="row">
    <div id="player_name" class="col-xs-5 col-sm-3" onclick="backtohome()"><center>
        <img src="/img/user.png" alt="Smiley face" width="25" height="25">       <%=session[:tester]%>
      </center>
    </div>
    <div id="coin_display" class="col-xs-4 col-sm-2"><center><img src="/img/coin.png" alt="Smiley face" width="25" height="25"><div id="coinicon"><%= @@coins[session[:tester]] %></div></center></div>
    <!-- Optional: clear the XS cols if their content doesn't match in height -->
    <div id="gem_display" class="col-xs-2 col-sm-2" onclick="refillEnergy()"><center><img src="/img/gem.png" alt="Smiley face" width="25" height="25"><div id="gemnum"><%=@@gems[session[:tester]]%></div>
    </center>
    </div>
    <form id="homeform" class="form-horizontal" role="form" action="home" method="post">
      </form>
  </div>

       <script type="text/JavaScript">
        //<![CDATA[
        function backtohome(){
          var homeform = document.forms["homeform"];
          homeform.submit();
        }
           //]]>
        </script>

  <!-- <h1>Records</h1> -->

 <div class="row">
    <div id="red_background" class="col-xs-11 col-md-7">

</br>

              <%name_array = @@names.shuffle%>
              <%name_array.each do |name|%>
                  <%next if name==session[:tester]%>
                  <%bundle_array = @@librarian.get_parcels_by_categ(name, @categ)%>
                  <%next if bundle_array==nil %>
                  <div>
                    <center>Guess what <%=name%> thinks about... </center>
                  <%bundle_array.each do |bundle|%>
                    <%next if @@librarian.has_played?(session[:tester], bundle[0])%>
                    <%quiz_array = bundle[1]%>
                    <%puts "quiz_array[0]"%>
                    <%puts quiz_array[0][:option0]%>
                      <%btnid = "button" + bundle[0]%>
                      <center><button id="<%=btnid%>" class="btn btn-success btn-block" name="uuid" value="<%=bundle[0]%>" ><%=quiz_array[0]["option0"]%> vs <%=quiz_array[0]["option1"]%></button></center>
                    <script type="text/javascript">
                      //<![CDATA[
                         new guessButton("<%=btnid%>","<%=bundle[0]%>","<%=@@coins[session[:tester]]%>");
                      //]]>
                    </script>
                  <%end%>
                  </div>
              <%end%>

              <form class="form-horizontal" role="form" action="choose_guess_categ" method="post">
              <div class="col-xs-6 col-sm-6">
                <center><button type="submit" class="btn btn-primary btn-block">Back</button></center>
              </div>
              </form>
              <form class="form-horizontal" role="form" action="home" method="post">
              <div class="col-xs-6 col-sm-6">
                <center><button type="submit" class="btn btn-info btn-block">Home</button></center>
              </div>
              </form>

      </div>
  </div>




      <!-- FOOTER -->

    </div><!-- /.container -->


    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    
    <!-- Latest compiled and minified JavaScript -->
    <script src="https://code.jquery.com/jquery-1.10.2.min.js"></script>
    <script src="//netdna.bootstrapcdn.com/bootstrap/3.0.3/js/bootstrap.min.js"></script>    
  </body>
</html>
